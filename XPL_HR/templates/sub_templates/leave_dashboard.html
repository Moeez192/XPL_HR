<div class="containe-fluid mt-5" style="margin-top:-70px !important">
    <!-- Dashboard Cards -->
     
    <div class="row text-center mb-4">
        <div class="col-md-4">
            <div class="dashboard-card card-total-employees">
                <div class="icon-container">
                    <i class="fas fa-users"></i> <!-- employee icon -->
                </div>
                <div class="dashboard-text">
                    <h5>Total Employees</h5>
                    <h3>{{ total_employees }}</h3> 
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="dashboard-card card-total-departments">
                <div class="icon-container">
                    <i class="fas fa-building"></i> <!-- Department Icon -->
                </div>
                <div class="dashboard-text">
                    <h5>Total Departments</h5>
                    <!-- <h3>{{total_departments}}</h3>  -->
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="dashboard-card card-total-supervisors">
                <div class="icon-container">
                    <i class="fas fa-user-tie"></i> <!-- Supervisors Icon -->
                </div>
                <div class="dashboard-text">
                    <h5>Total Supervisors</h5>
                    <h3>{{total_supervisors}}</h3> 
                </div>
            </div>
        </div>
    </div>
    {% if messages %}
    <div class="alert alert-info">
        {% for message in messages %}
            <p>{{ message }}</p>
        {% endfor %}
    </div>
{% endif %}
{% if form.errors %}
    <div class="alert alert-danger">
        <ul>
        {% for field in form %}
            {% for error in field.errors %}
                <li>{{ error }}</li>
            {% endfor %}
        {% endfor %}
        {% for error in form.non_field_errors %}
            <li>{{ error }}</li>
        {% endfor %}
        </ul>
    </div>
{% endif %}
    <!-- Search and Table Filter -->
    {% if request.session.role == 'admin' %}
<h3 class="text-center">Leave Requests</h3>
<br>
    <!-- Scrollable Table -->
    <div class="table-container">
        <table class="table table-hover" id="employeeTable">
            <thead class="table-primary">
                <tr>
                    <th scope="col">Applicant Name</th>
                    <th scope="col">Leave type</th>
                    <th scope="col">Leave Start</th>
                    <th scope="col">Leave End</th>
                    <th scope="col">Reason</th>
                    <th scope="col">Status</th>
                    <th scope="col">Action</th>
                </tr>
            </thead>
            <tbody>
                {% for leaves in leave_applications %}
                <tr>
                    <td>{{ leaves.employee.first_name }} {{ leaves.employee.last_name }}</td>
                    <td> {{ leaves.leave_type }}</th>
                    <td>{{ leaves.start_date }}</td>
                    <td> {{ leaves.end_date }}</td>
                    <td> {{ leaves.reason }}</td>
                    <td>{{ leaves.status }}</td>
                    <td>
                    {% if leaves.status == 'Pending' %}
                        <form method="POST" action="{% url 'leave' %}">
                            {% csrf_token %}
                            <input type="hidden" name="leave_application_id" value="{{ leaves.id }}"> <!-- Corrected to leave ID -->
                            <button type="submit" name="status" value="approved" class="btn btn-success">Approve</button>
                            <button type="submit" name="status" value="rejected" class="btn btn-danger">Reject</button>
                        </form>
                    {% endif %}
                    </td>
                </tr>
                {% empty %}
                    <tr>
                        <td colspan="6" class="text-center">No Leaves Requested.</td>
                    </tr>
                {% endfor %}
                
            </tbody>
        </table>
    </div>

    <br>
    {% endif %}
    <h3 class="text-center">Your Leave Applications</h2>
<table class="table">
    <thead class="table-primary">
        <tr>
            <th scope="col">Leave Type</th>
            <th scope="col">Leave Days</th>
            <th scope="col">Status</th>
        </tr>
    </thead>
    <tbody>
        {% for leaves in logged_in_user %}
        <tr>
            <td>{{ leaves.leave_type }}</td>
            <td>{{ leaves.leave_days }}</td>
            <td>{{ leaves.status }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="3">No leave applications found.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

</div>